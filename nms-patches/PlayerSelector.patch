@@ -52,6 +52,11 @@
     }
 
     public static List getPlayers(ICommandListener icommandlistener, String s, Class oclass) {
+        // CraftBukkit start - disable playerselections for ICommandListeners other than command blocks
+        if (!(icommandlistener instanceof CommandBlockListenerAbstract)) {
+            return com.google.common.collect.ImmutableList.of();
+        }
+        // CraftBukkit end
         Matcher matcher = PlayerSelector.a.matcher(s);
 
         if (matcher.matches() && icommandlistener.a(1, "@")) {
